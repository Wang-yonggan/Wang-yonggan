<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/chrome2.svg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"wang-yonggan.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="å­¦æ— æ­¢å¢ƒ">
<meta property="og:type" content="website">
<meta property="og:title" content="MySoul">
<meta property="og:url" content="https://wang-yonggan.github.io/page/3/index.html">
<meta property="og:site_name" content="MySoul">
<meta property="og:description" content="å­¦æ— æ­¢å¢ƒ">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="å‹‡æ•¢">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://wang-yonggan.github.io/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>MySoul</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">MySoul</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">å–ä¸Šå¾—ä¸­ï¼Œå–ä¸­å¾—ä¸‹</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://gitee.com/wang_yonggan" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wang-yonggan.github.io/2022/03/20/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%97%A5%E5%BF%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/t2.png">
      <meta itemprop="name" content="å‹‡æ•¢">
      <meta itemprop="description" content="å­¦æ— æ­¢å¢ƒ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MySoul">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/20/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%97%A5%E5%BF%97/" class="post-title-link" itemprop="url">mysql-log</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-03-20 20:17:44" itemprop="dateCreated datePublished" datetime="2022-03-20T20:17:44+08:00">2022-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-04-10 14:43:32" itemprop="dateModified" datetime="2022-04-10T14:43:32+08:00">2022-04-10</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyanï¼š</span>
    
    
      <a title="changyan" href="/2022/03/20/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%97%A5%E5%BF%97/#SOHUCS" itemprop="discussionUrl">
        <span id="url::https://wang-yonggan.github.io/2022/03/20/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%97%A5%E5%BF%97/" class="cy_cmt_count" data-xid="2022/03/20/æ•°æ®åº“/æ—¥å¿—/" itemprop="commentCount"></span>
      </a>
    
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>4k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>4 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/cswiki/p/15816371.html">è½¬è½½</a></p>
<h2 id="binlog-æŒä¹…åŒ–"><a href="#binlog-æŒä¹…åŒ–" class="headerlink" title="binlog æŒä¹…åŒ–"></a>binlog æŒä¹…åŒ–</h2><p>è¿™é‡Œå¼•å…¥äº†ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼šbinlog cache</p>
<p>ä»åå­—å°±èƒ½çœ‹å‡ºæ¥ï¼Œbinlog cache å…¶å®å°±æ˜¯ä¸€ç‰‡å†…å­˜åŒºåŸŸï¼Œå……å½“ç¼“å­˜çš„ä½œç”¨ã€‚</p>
<p>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·± binlog cache åŒºåŸŸï¼Œ<strong>åœ¨äº‹åŠ¡è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼ŒMySQL ä¼šå…ˆæŠŠæ—¥å¿—å†™åˆ° binlog cache ä¸­ï¼Œç­‰åˆ°äº‹åŠ¡çœŸæ­£æäº¤çš„æ—¶å€™ï¼Œå†ç»Ÿä¸€æŠŠ binlog cache ä¸­çš„æ•°æ®å†™åˆ° binlog æ–‡ä»¶ä¸­</strong>ã€‚ï¼ˆbinlog cache æœ‰å¾ˆå¤šä¸ªï¼Œbinlog æ–‡ä»¶åªæœ‰ä¸€ä¸ªï¼ï¼‰</p>
<p>äº‹å®ä¸Šï¼Œè¿™ä¸ªä» binlog cache å†™åˆ° binlog æ–‡ä»¶ä¸­çš„æ“ä½œï¼Œå¹¶<strong>ä¸</strong>å°±æ˜¯è½ç›˜æ“ä½œäº†ï¼Œè¿™é‡Œä»…ä»…æ˜¯æŠŠ binlog å†™åˆ°äº†æ–‡ä»¶ç³»ç»Ÿçš„ page cache ä¸Šï¼ˆè¿™ä¸€æ­¥å¯¹åº”ä¸‹å›¾ä¸­çš„ <code>write</code> æ“ä½œï¼‰ã€‚</p>
<blockquote>
<p>ç®€å•è§£é‡Šä¸‹æ–‡ä»¶ç³»ç»Ÿçš„ page cacheï¼š</p>
<p>CPU å¦‚æœè¦è®¿é—®å¤–éƒ¨ç£ç›˜ä¸Šçš„æ–‡ä»¶ï¼Œéœ€è¦é¦–å…ˆå°†è¿™äº›æ–‡ä»¶çš„å†…å®¹æ‹·è´åˆ°å†…å­˜ä¸­ï¼Œç”±äºç¡¬ä»¶çš„é™åˆ¶ï¼Œä»ç£ç›˜åˆ°å†…å­˜çš„æ•°æ®ä¼ è¾“é€Ÿåº¦æ˜¯å¾ˆæ…¢çš„ï¼Œå¦‚æœç°åœ¨ç‰©ç†å†…å­˜æœ‰ç©ºä½™ï¼Œå¹²å˜›ä¸ç”¨è¿™äº›ç©ºé—²å†…å­˜æ¥ç¼“å­˜ä¸€äº›ç£ç›˜çš„æ–‡ä»¶å†…å®¹å‘¢ï¼Œ<strong>è¿™éƒ¨åˆ†ç”¨ä½œç¼“å­˜ç£ç›˜æ–‡ä»¶çš„å†…å­˜å°±å«åš page cache</strong>ã€‚</p>
<p>å¾ˆå¤šåŒå­¦çœ‹åˆ°è¿™é‡Œå¯èƒ½è§‰å¾—ç‰¹åˆ«ç‰¹åˆ«ç†Ÿæ‚‰ï¼Œæ˜¯çš„ï¼Œå’Œ CPU é‡Œçš„é«˜é€Ÿç¼“å­˜æ˜¯ä¸æ˜¯å¾ˆåƒï¼Ÿä¸¤è€…å…¶å®éƒ½æ˜¯åˆ©ç”¨çš„å±€éƒ¨æ€§åŸç†ï¼Œåªä¸è¿‡<strong>é«˜é€Ÿç¼“å­˜æ˜¯ CPU ç¼“å­˜å†…å­˜çš„æ•°æ®ï¼Œè€Œ page cache æ˜¯å†…å­˜ç¼“å­˜ç£ç›˜çš„æ•°æ®</strong>ï¼Œè¿™ä¹Ÿä½“ç°äº†æ“ä½œç³»ç»Ÿå†…å­˜å±‚æ¬¡ç»“æ„åˆ†çº§çš„æ€æƒ³ã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼Œæœ€åéœ€è¦æŠŠ page cache ä¸­çš„æ•°æ®åŒæ­¥åˆ°ç£ç›˜ä¸Šï¼Œæ‰ç®—çœŸæ­£å®Œæˆäº† binlog çš„æŒä¹…åŒ–ï¼ˆè¿™ä¸€æ­¥å¯¹åº”ä¸‹å›¾ä¸­çš„ <code>fsync</code> æ“ä½œï¼‰ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è®¤ä¸º <code>fsync</code> æ‰å ç£ç›˜çš„ IOPS (Input/Output Operations Per Second)</p>
<p><img src="https://job-wyg.oss-cn-beijing.aliyuncs.com/image-20220410143626228.png" alt="image-20220410143626228"></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">write å’Œ fsync çš„æ—¶æœºï¼Œæ˜¯ç”±å‚æ•° sync_binlog æ§åˆ¶çš„ï¼š</span><br><span class="line"></span><br><span class="line">sync_binlog = <span class="number">0</span>ï¼Œæ¯æ¬¡æäº¤äº‹åŠ¡çš„æ—¶å€™ï¼Œåªè¿›è¡Œ writeï¼Œä¸è¿›è¡Œ fsync</span><br><span class="line">sync_binlog = <span class="number">1</span>å€™ï¼Œæ¯æ¬¡æäº¤äº‹åŠ¡çš„æ—¶å€™ï¼Œæ‰§è¡Œ write å’Œ fsync</span><br><span class="line">sync_binlog = N(N&gt;<span class="number">1</span>)ï¼Œæ¯æ¬¡æäº¤äº‹åŠ¡çš„æ—¶å€™ï¼Œæ‰§è¡Œ writeï¼Œç´¯ç§¯ N ä¸ªäº‹åŠ¡åå†æ‰§è¡Œ fsync</span><br><span class="line">å¯ä»¥çœ‹å‡ºæ¥ï¼Œå¦‚æœä¸šåŠ¡åœºæ™¯æ¶‰åŠåˆ°çš„ IO æ“ä½œå¾ˆå¤šçš„è¯ï¼Œå¯ä»¥é€‚å½“å¢å¤§ sync_binlog çš„å€¼ï¼Œæé«˜æ€§èƒ½ã€‚ä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€å®šçš„é£é™©ï¼Œæ¯”å¦‚ä½ è®¾ç½®æˆ <span class="number">100</span>ï¼Œä¸‡ä¸€åœ¨ç¬¬ <span class="number">80</span> ä¸ªäº‹åŠ¡æäº¤çš„æ—¶å€™æ•°æ®åº“å®•æœºäº†ï¼Œé‚£è¿™äº›äº‹åŠ¡çš„ binlog æ—¥å¿—ç”±äºæ²¡æœ‰æ‰§è¡Œ fsyncï¼Œä¹Ÿå°±ä¸¢å¤±äº†ã€‚</span><br></pre></td></tr></table></figure>

<h2 id="redolog-æŒä¹…åŒ–"><a href="#redolog-æŒä¹…åŒ–" class="headerlink" title="redolog æŒä¹…åŒ–"></a>redolog æŒä¹…åŒ–</h2><p>ç±»æ¯” binlogï¼Œåœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œbinlog éƒ½æ˜¯å­˜åœ¨ binlog cache ä¸­ï¼Œredolog ä¹Ÿæœ‰è¿™æ ·ä¸€å—å†…å­˜åŒºåŸŸï¼Œå«ä½œ <strong>redolog buffer</strong>ã€‚</p>
<p><strong>åœ¨äº‹åŠ¡è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼ŒMySQL ä¼šå…ˆæŠŠæ—¥å¿—å†™åˆ° redolog buffer ä¸­ï¼Œç­‰åˆ°äº‹åŠ¡çœŸæ­£æäº¤çš„æ—¶å€™ï¼Œå†ç»Ÿä¸€æŠŠ redolog buffer ä¸­çš„æ•°æ®å†™åˆ° redolog æ–‡ä»¶ä¸­</strong>ã€‚å’Œ binlog çš„è½ç›˜æ“ä½œä¸€æ ·ï¼Œè¿™ä¸ªä» redolog buffer å†™åˆ° redolog æ–‡ä»¶ä¸­çš„æ“ä½œï¼Œå¹¶<strong>ä¸</strong>å°±æ˜¯è½ç›˜æ“ä½œäº†ï¼Œè¿™é‡Œä»…ä»…æ˜¯æŠŠ redolog å†™åˆ°äº†æ–‡ä»¶ç³»ç»Ÿçš„ page cache ä¸Šï¼Œæœ€åè¿˜éœ€è¦æ‰§è¡Œ <code>fsync</code> æ‰èƒ½å¤Ÿå®ç°çœŸæ­£çš„è½ç›˜ã€‚</p>
<p><img src="https://job-wyg.oss-cn-beijing.aliyuncs.com/image-20220410143800256.png" alt="image-20220410143800256"></p>
<p>è§£é‡Šä¸‹ redo log bufferï¼Ÿ</p>
<p>åœ¨ä¸€ä¸ªäº‹åŠ¡çš„æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œæ—¥å¿—æ˜¯è¦å†™å¤šæ¬¡çš„ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªäº‹åŠ¡ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">begin</span>;</span><br><span class="line">	<span class="keyword">insert</span> <span class="keyword">into</span> table1 ...</span><br><span class="line">	<span class="keyword">insert</span> <span class="keyword">into</span> table2 ...</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªäº‹åŠ¡è¦å¾€ä¸¤ä¸ªè¡¨ table1 å’Œ table2 ä¸­æ’å…¥è®°å½•ï¼Œä¸ºäº†ç¡®ä¿è¿™ä¸ªäº‹åŠ¡ä¸è¢«æ‹†å¼€ï¼Œä¸€æ¬¡æ€§çš„å®Œæ•´å†™å…¥æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œåœ¨æ’å…¥æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æŠŠç”Ÿæˆçš„æ—¥å¿—éƒ½å…ˆä¿å­˜èµ·æ¥ã€‚redolog buffer å°±æ˜¯è¿™ä¹ˆä¸€ä¸ªç”¨æ¥å…ˆå­˜ redo æ—¥å¿—çš„åœ°æ–¹ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ‰§è¡Œç¬¬ä¸€æ¡ insert è¯­å¥çš„æ—¶å€™ï¼Œredolog buffer ä¹Ÿå°±å†™å…¥äº†è¿™æ¡è®°å½•çš„æ—¥å¿—ã€‚</p>
<p>ä¸åŒäº binlog cache æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªï¼Œ<strong>redolog buffer åªæœ‰é‚£ä¹ˆä¸€ä¸ª</strong>ã€‚</p>
<p>äº‹å®ä¸Šï¼Œæ—¥å¿—å†™åˆ° redolog buffer æ˜¯å¾ˆå¿«çš„ï¼Œwirte åˆ° page cache ä¹Ÿå·®ä¸å¤šï¼Œä½†æ˜¯ fsync æŒä¹…åŒ–åˆ°ç£ç›˜çš„é€Ÿåº¦å°±æ…¢å¤šäº†ï¼Œä¸ºäº†æ§åˆ¶ redo log çš„å†™å…¥ç­–ç•¥ï¼ŒInnoDB æä¾›äº† <code>innodb_flush_log_at_trx_commit</code> å‚æ•°ï¼Œå®ƒæœ‰ä¸‰ç§å¯èƒ½å–å€¼ï¼š</p>
<ul>
<li><code>innodb_flush_log_at_trx_commit = 0</code>ï¼Œæ¯æ¬¡äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œéƒ½åªæ˜¯æŠŠ redolog ç•™åœ¨ redolog buffer ä¸­</li>
<li><code>innodb_flush_log_at_trx_commit = 1</code>ï¼Œæ¯æ¬¡äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œéƒ½æ‰§è¡Œ fsync å°† redolog ç›´æ¥æŒä¹…åŒ–åˆ°ç£ç›˜</li>
<li><code>innodb_flush_log_at_trx_commit = 2</code>ï¼Œæ¯æ¬¡äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œéƒ½åªæ‰§è¡Œ write å°† redolog å†™åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ page cache ä¸­</li>
</ul>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œå„ä½å°ä¼™ä¼´ä»¬å¯¹ binlog å’Œ redolog çš„æŒä¹…åŒ–æœºåˆ¶æƒ³å¿…éƒ½æœ‰æ‰€äº†è§£äº†ï¼Œæˆ‘ä»¬æ¥çœ‹æ–‡é¢˜ï¼š<strong>äº‹åŠ¡è¿˜æ²¡æäº¤çš„æ—¶å€™ï¼Œredolog èƒ½ä¸èƒ½è¢«æŒä¹…åŒ–åˆ°ç£ç›˜å‘¢</strong>ï¼Ÿ</p>
<p>å…ˆè¯´ç­”æ¡ˆï¼Œç­”æ¡ˆå°±æ˜¯<strong>æœ‰å¯èƒ½</strong>ã€‚</p>
<p>åˆ†æä¸‹ redolog å¯èƒ½å­˜åœ¨çš„ä¸‰ç§çŠ¶æ€ï¼ˆbinlog ä¹Ÿå·®ä¸å¤šï¼‰ï¼š</p>
<ul>
<li>äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå­˜åœ¨ MySQL çš„è¿›ç¨‹å†…å­˜ä¸­çš„ redolog buffer ä¸­</li>
<li>äº‹åŠ¡æäº¤ï¼Œæ‰§è¡Œ write æ“ä½œå­˜åœ¨æ–‡ä»¶ç³»ç»Ÿçš„ page cache ä¸­ï¼Œä½†æ˜¯æ²¡æœ‰æ‰§è¡Œ fsync æ“ä½œæŒä¹…åŒ–åˆ°ç£ç›˜</li>
<li>äº‹åŠ¡æäº¤ï¼Œæ‰§è¡Œ fsync æ“ä½œæŒä¹…åŒ–åˆ°ç£ç›˜</li>
</ul>
<p>è‡³äºä¸ºä»€ä¹ˆè¯´äº‹åŠ¡è¿˜æ²¡æäº¤çš„æ—¶å€™ï¼Œredolog ä¹Ÿæœ‰å¯èƒ½è¢«æŒä¹…åŒ–åˆ°ç£ç›˜å‘¢ï¼Ÿ</p>
<p>InnoDB æœ‰ä¸€ä¸ªåå°çº¿ç¨‹ï¼Œæ¯éš” 1 ç§’è½®è¯¢ä¸€æ¬¡ï¼Œå…·ä½“çš„æ“ä½œæ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>è°ƒç”¨ write å°† redolog buffer ä¸­çš„æ—¥å¿—å†™åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ page cacheï¼Œ</li>
<li>ç„¶åè°ƒç”¨ fsync æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚è€Œåœ¨äº‹åŠ¡æ‰§è¡Œä¸­é—´è¿‡ç¨‹çš„ redolog éƒ½æ˜¯ç›´æ¥å†™åœ¨ redolog buffer ä¸­çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªæ²¡æœ‰æäº¤çš„äº‹åŠ¡çš„ redologï¼Œä¹Ÿæ˜¯æœ‰å¯èƒ½ä¼šè¢«åå°çº¿ç¨‹ä¸€èµ·æŒä¹…åŒ–åˆ°ç£ç›˜çš„ã€‚</li>
</ol>
<p>å¦å¤–ï¼Œé™¤äº†åå°çº¿ç¨‹æ¯ç§’ä¸€æ¬¡çš„è½®è¯¢æ“ä½œå¤–ï¼Œè¿˜æœ‰ä¸¤ç§åœºæ™¯ä¼šè®©ä¸€ä¸ªæ²¡æœ‰æäº¤çš„äº‹åŠ¡çš„ redolog å†™ç›˜ï¼š</p>
<ol>
<li><p>innodb_flush_log_at_trx_commit è®¾ç½®æ˜¯ 1ï¼Œè¿™æ ·å¹¶è¡Œçš„æŸä¸ªäº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œå°±ä¼šé¡ºå¸¦å°†è¿™ä¸ªäº‹åŠ¡çš„ redolog buffer æŒä¹…åŒ–åˆ°ç£ç›˜</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾äº‹åŠ¡ A æ‰§è¡Œåˆ°ä¸€åŠï¼Œå·²ç»å†™äº†ä¸€äº› redolog åˆ° redolog buffer ä¸­ï¼Œè¿™æ—¶å€™æœ‰å¦å¤–ä¸€ä¸ªäº‹åŠ¡ B æäº¤ï¼ŒæŒ‰ç…§ innodb_flush_log_at_trx_commit = 1 çš„é€»è¾‘ï¼Œäº‹åŠ¡ B è¦æŠŠ redolog buffer é‡Œçš„æ—¥å¿—å…¨éƒ¨æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œè¿™æ—¶å€™ï¼Œå°±ä¼šå¸¦ä¸Šäº‹åŠ¡ A åœ¨ redolog buffer é‡Œçš„æ—¥å¿—ä¸€èµ·æŒä¹…åŒ–åˆ°ç£ç›˜</p>
</li>
<li><p>redo log buffer å ç”¨çš„ç©ºé—´è¾¾åˆ° redolo buffer å¤§å°ï¼ˆç”±å‚æ•° <code>innodb_log_buffer_size</code> æ§åˆ¶ï¼Œé»˜è®¤æ˜¯ 8MBï¼‰ä¸€åŠçš„æ—¶å€™ï¼Œåå°çº¿ç¨‹ä¼šä¸»åŠ¨å†™ç›˜ã€‚ä¸è¿‡ç”±äºè¿™ä¸ªäº‹åŠ¡å¹¶æ²¡æœ‰æäº¤ï¼Œæ‰€ä»¥è¿™ä¸ªå†™ç›˜åŠ¨ä½œåªæ˜¯ write åˆ°äº†æ–‡ä»¶ç³»ç»Ÿçš„ page cacheï¼Œä»ç„¶æ˜¯åœ¨å†…å­˜ä¸­ï¼Œå¹¶æ²¡æœ‰è°ƒç”¨ fsync çœŸæ­£è½ç›˜</p>
</li>
</ol>
<hr>
<p>æœ€åæ”¾ä¸Šè¿™é“é¢˜çš„èƒŒè¯µç‰ˆï¼š</p>
<blockquote>
<p>ğŸ¥¸ <strong>é¢è¯•å®˜</strong>ï¼š</p>
<ul>
<li>é—®é¢˜ï¼šäº‹åŠ¡è¿˜æ²¡æäº¤çš„æ—¶å€™ï¼Œredo log èƒ½ä¸èƒ½è¢«æŒä¹…åŒ–åˆ°ç£ç›˜å‘¢ï¼Ÿ</li>
<li>ç›¸å…³é—®é¢˜ï¼šMySQL æ˜¯å¦‚ä½•ä¿è¯æ•°æ®ä¸ä¸¢å¤±çš„å‘¢ï¼Ÿ</li>
</ul>
<p>ğŸ˜ <strong>å°ç‰›è‚‰</strong>ï¼šäº‹åŠ¡è¿˜æ²¡æœ‰æäº¤çš„æ—¶å€™ï¼Œredo log æ˜¯æœ‰å¯èƒ½è¢«æŒä¹…åŒ–åˆ°ç£ç›˜çš„ã€‚</p>
<p>redolog çš„å…·ä½“è½ç›˜æ“ä½œæ˜¯è¿™æ ·çš„ï¼šåœ¨äº‹åŠ¡è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼ŒMySQL ä¼šå…ˆæŠŠæ—¥å¿—å†™åˆ° redolog buffer ä¸­ï¼Œç­‰åˆ°äº‹åŠ¡çœŸæ­£æäº¤çš„æ—¶å€™ï¼Œå†ç»Ÿä¸€æŠŠ redolog buffer ä¸­çš„æ•°æ®å†™åˆ° redolog æ–‡ä»¶ä¸­ã€‚ä¸è¿‡è¿™ä¸ªä» redolog buffer å†™åˆ° redolog æ–‡ä»¶ä¸­çš„æ“ä½œä¹Ÿå°±æ˜¯ write å¹¶ä¸å°±æ˜¯è½ç›˜æ“ä½œäº†ï¼Œè¿™é‡Œä»…ä»…æ˜¯æŠŠ redolog å†™åˆ°äº†æ–‡ä»¶ç³»ç»Ÿçš„ page cache ä¸Šï¼Œæœ€åè¿˜éœ€è¦æ‰§è¡Œ fsync æ‰èƒ½å¤Ÿå®ç°çœŸæ­£çš„è½ç›˜ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œredolog å…¶å®å­˜åœ¨ä¸‰ç§çŠ¶æ€ï¼š</p>
<ul>
<li>äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå­˜åœ¨ MySQL çš„è¿›ç¨‹å†…å­˜ä¸­çš„ redolog buffer ä¸­</li>
<li>äº‹åŠ¡æäº¤ï¼Œæ‰§è¡Œ write æ“ä½œå­˜åœ¨æ–‡ä»¶ç³»ç»Ÿçš„ page cache ä¸­ï¼Œä½†æ˜¯æ²¡æœ‰æ‰§è¡Œ fsync æ“ä½œæŒä¹…åŒ–åˆ°ç£ç›˜</li>
<li>äº‹åŠ¡æäº¤ï¼Œæ‰§è¡Œ fsync æ“ä½œæŒä¹…åŒ–åˆ°ç£ç›˜</li>
</ul>
<p>é¢ä¸ºä»€ä¹ˆè¯´äº‹åŠ¡è¿˜æ²¡æäº¤çš„æ—¶å€™ï¼Œredolog ä¹Ÿæœ‰å¯èƒ½è¢«æŒä¹…åŒ–åˆ°ç£ç›˜å‘¢ï¼Ÿ</p>
<p>ä¸»è¦æœ‰ä¸‰ç§å¯èƒ½çš„åŸå› ï¼š</p>
<ol>
<li>ç¬¬ä¸€ç§æƒ…å†µï¼šInnoDB æœ‰ä¸€ä¸ªåå°çº¿ç¨‹ï¼Œæ¯éš” 1 ç§’è½®è¯¢ä¸€æ¬¡ï¼Œå…·ä½“çš„æ“ä½œæ˜¯è¿™æ ·çš„ï¼šè°ƒç”¨ write å°† redolog buffer ä¸­çš„æ—¥å¿—å†™åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ page cacheï¼Œç„¶åè°ƒç”¨ fsync æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚è€Œåœ¨äº‹åŠ¡æ‰§è¡Œä¸­é—´è¿‡ç¨‹çš„ redolog éƒ½æ˜¯ç›´æ¥å†™åœ¨ redolog buffer ä¸­çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªæ²¡æœ‰æäº¤çš„äº‹åŠ¡çš„ redologï¼Œä¹Ÿæ˜¯æœ‰å¯èƒ½ä¼šè¢«åå°çº¿ç¨‹ä¸€èµ·æŒä¹…åŒ–åˆ°ç£ç›˜çš„ã€‚</li>
<li>ç¬¬äºŒç§æƒ…å†µï¼šinnodb_flush_log_at_trx_commit è®¾ç½®æ˜¯ 1ï¼Œè¿™ä¸ªå‚æ•°çš„æ„æ€å°±æ˜¯ï¼Œæ¯æ¬¡äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œéƒ½æ‰§è¡Œ fsync å°† redolog ç›´æ¥æŒä¹…åŒ–åˆ°ç£ç›˜ï¼ˆè¿˜æœ‰ 0 å’Œ 2 çš„é€‰æ‹©ï¼Œ0 è¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œéƒ½åªæ˜¯æŠŠ redolog ç•™åœ¨ redolog buffer ä¸­ï¼›2 è¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œéƒ½åªæ‰§è¡Œ write å°† redolog å†™åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ page cache ä¸­ï¼‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾äº‹åŠ¡ A æ‰§è¡Œåˆ°ä¸€åŠï¼Œå·²ç»å†™äº†ä¸€äº› redolog åˆ° redolog buffer ä¸­ï¼Œè¿™æ—¶å€™æœ‰å¦å¤–ä¸€ä¸ªäº‹åŠ¡ B æäº¤ï¼ŒæŒ‰ç…§ innodb_flush_log_at_trx_commit = 1 çš„é€»è¾‘ï¼Œäº‹åŠ¡ B è¦æŠŠ redolog buffer é‡Œçš„æ—¥å¿—å…¨éƒ¨æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œè¿™æ—¶å€™ï¼Œå°±ä¼šå¸¦ä¸Šäº‹åŠ¡ A åœ¨ redolog buffer é‡Œçš„æ—¥å¿—ä¸€èµ·æŒä¹…åŒ–åˆ°ç£ç›˜</li>
<li>ç¬¬äºŒç§æƒ…å†µï¼šredo log buffer å ç”¨çš„ç©ºé—´è¾¾åˆ° redolog buffer å¤§å°ï¼ˆç”±å‚æ•° <code>innodb_log_buffer_size</code> æ§åˆ¶ï¼Œé»˜è®¤æ˜¯ 8MBï¼‰ä¸€åŠçš„æ—¶å€™ï¼Œåå°çº¿ç¨‹ä¼šä¸»åŠ¨å†™ç›˜ã€‚ä¸è¿‡ç”±äºè¿™ä¸ªäº‹åŠ¡å¹¶æ²¡æœ‰æäº¤ï¼Œæ‰€ä»¥è¿™ä¸ªå†™ç›˜åŠ¨ä½œåªæ˜¯ write åˆ°äº†æ–‡ä»¶ç³»ç»Ÿçš„ page cacheï¼Œä»ç„¶æ˜¯åœ¨å†…å­˜ä¸­ï¼Œå¹¶æ²¡æœ‰è°ƒç”¨ fsync çœŸæ­£è½ç›˜</li>
</ol>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wang-yonggan.github.io/2022/03/20/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E5%BF%B52.0/%E4%BA%8B%E5%8A%A1-MVCC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/t2.png">
      <meta itemprop="name" content="å‹‡æ•¢">
      <meta itemprop="description" content="å­¦æ— æ­¢å¢ƒ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MySoul">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/20/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E5%BF%B52.0/%E4%BA%8B%E5%8A%A1-MVCC/" class="post-title-link" itemprop="url">äº‹åŠ¡-MVCC</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-03-20 13:50:28" itemprop="dateCreated datePublished" datetime="2022-03-20T13:50:28+08:00">2022-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-03-21 00:51:22" itemprop="dateModified" datetime="2022-03-21T00:51:22+08:00">2022-03-21</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyanï¼š</span>
    
    
      <a title="changyan" href="/2022/03/20/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E5%BF%B52.0/%E4%BA%8B%E5%8A%A1-MVCC/#SOHUCS" itemprop="discussionUrl">
        <span id="url::https://wang-yonggan.github.io/2022/03/20/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E5%BF%B52.0/%E4%BA%8B%E5%8A%A1-MVCC/" class="cy_cmt_count" data-xid="2022/03/20/æ•°æ®åº“/æ•°æ®åº“æ¦‚å¿µ2.0/äº‹åŠ¡-MVCC/" itemprop="commentCount"></span>
      </a>
    
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>2.7k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>2 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>`</p>
<p>å‚è€ƒ: <a target="_blank" rel="noopener" href="https://juejin.cn/post/7016165148020703246">æ˜é‡‘</a></p>
<h2 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h2><blockquote>
<p>Cæ˜¯äº‹åŠ¡çš„æ ¹æœ¬è¿½æ±‚æ•°æ®ä¸€è‡´æ€§çš„ç ´åä¸»è¦æ¥è‡ªä¸¤ä¸ªæ–¹é¢</p>
<ol>
<li>äº‹åŠ¡çš„å¹¶å‘æ‰§è¡Œ    â€”&gt;  å¹¶å‘æ§åˆ¶æŠ€æœ¯MVCC(ä¹Ÿå¯ä»¥ç”¨é”,ä½†æ˜¯é”æ€§èƒ½å¤ªä½)â€“&gt;undo</li>
<li>äº‹åŠ¡æ•…éšœæˆ–ç³»ç»Ÿæ•…éšœ   â€”&gt; æ—¥å¿—æ¢å¤æŠ€ â€“&gt;redo</li>
</ol>
</blockquote>
<h3 id="2-1-ACID"><a href="#2-1-ACID" class="headerlink" title="2.1 ACID"></a>2.1 ACID</h3><ol>
<li><p>Atomicity åŸå­æ€§</p>
<ol>
<li>begin</li>
<li>sql1</li>
<li>sql2</li>
<li>commit</li>
<li>æ„æˆé€»è¾‘æ•´ä½“çš„è¿™äº›æ•°æ®åº“æ“ä½œ,è¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸ,è¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚åŸºäºä»¥äº‹åŠ¡ä¸ºå•ä½æ‰§è¡Œ</li>
</ol>
</li>
</ol>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/03/20/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E5%BF%B52.0/%E4%BA%8B%E5%8A%A1-MVCC/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wang-yonggan.github.io/2022/03/18/spring/spring%E4%BA%8B%E5%8A%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/t2.png">
      <meta itemprop="name" content="å‹‡æ•¢">
      <meta itemprop="description" content="å­¦æ— æ­¢å¢ƒ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MySoul">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/18/spring/spring%E4%BA%8B%E5%8A%A1/" class="post-title-link" itemprop="url">springäº‹åŠ¡</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-03-18 16:12:25" itemprop="dateCreated datePublished" datetime="2022-03-18T16:12:25+08:00">2022-03-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-04-05 00:01:51" itemprop="dateModified" datetime="2022-04-05T00:01:51+08:00">2022-04-05</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyanï¼š</span>
    
    
      <a title="changyan" href="/2022/03/18/spring/spring%E4%BA%8B%E5%8A%A1/#SOHUCS" itemprop="discussionUrl">
        <span id="url::https://wang-yonggan.github.io/2022/03/18/spring/spring%E4%BA%8B%E5%8A%A1/" class="cy_cmt_count" data-xid="2022/03/18/spring/springäº‹åŠ¡/" itemprop="commentCount"></span>
      </a>
    
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>775</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>1</p>
<blockquote>
<p>å¼€å¯äº‹åŠ¡çš„å®è´¨â€“&gt;</p>
<ol>
<li><p>äº‹åŠ¡åˆ›å»ºä¸€ä¸ªconn</p>
</li>
<li><p>conn.setAutoCommit(false)</p>
</li>
<li><p>target.method</p>
</li>
<li><p>try{</p>
</li>
<li><p>conn.commit</p>
<p>}catch{ conn.rollback}</p>
</li>
<li></li>
</ol>
</blockquote>
<h3 id="ä¼ æ’­æœºåˆ¶Propagation"><a href="#ä¼ æ’­æœºåˆ¶Propagation" class="headerlink" title="ä¼ æ’­æœºåˆ¶Propagation"></a>ä¼ æ’­æœºåˆ¶Propagation</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>PROPAGATION_REQUIRED</td>
<td>å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚è¿™æ˜¯<strong>é»˜è®¤å€¼</strong>ã€‚</td>
<td>å¯é‡å…¥</td>
</tr>
<tr>
<td>PROPAGATION_REQUIRES_NEW</td>
<td>å»ºä¸€ä¸ª<strong>æ–°çš„äº‹åŠ¡</strong>ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠŠå½“å‰äº‹åŠ¡<strong>æŒ‚èµ·</strong>ã€‚</td>
<td>new</td>
</tr>
<tr>
<td>PROPAGATION_SUPPORTS</td>
<td>å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™ä»¥éäº‹åŠ¡çš„æ–¹å¼ç»§ç»­è¿è¡Œ</td>
<td>ç»§æ‰¿</td>
</tr>
<tr>
<td>PROPAGATION_NEVER</td>
<td></td>
<td></td>
</tr>
<tr>
<td>PROPAGATION_NOT_SUPPORTED</td>
<td></td>
<td></td>
</tr>
<tr>
<td>PROPAGATION_MANDATORY</td>
<td></td>
<td></td>
</tr>
<tr>
<td>PROPAGATION_NESTED</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="äº‹åŠ¡å¤±æ•ˆåŸå› "><a href="#äº‹åŠ¡å¤±æ•ˆåŸå› " class="headerlink" title="äº‹åŠ¡å¤±æ•ˆåŸå› "></a>äº‹åŠ¡å¤±æ•ˆåŸå› </h3><ol>
<li>ç±»ä¸æ˜¯@component</li>
<li>æ–¹æ³•public</li>
<li>æ–¹æ³•è°ƒç”¨äº†this.æ–¹æ³•</li>
<li>æ–¹æ³•å¯åŠ¨äº†æ–°çš„çº¿ç¨‹</li>
<li><strong>å¼‚å¸¸è¢«try cache</strong></li>
<li>æŠ›å‡ºäº†å—æ£€å¼‚å¸¸</li>
<li>æ•°æ®åº“è‡ªèº«ä¸æ”¯æŒäº‹åŠ¡</li>
</ol>
<h4 id="å›æ»šæœºåˆ¶"><a href="#å›æ»šæœºåˆ¶" class="headerlink" title="å›æ»šæœºåˆ¶"></a>å›æ»šæœºåˆ¶</h4><ol>
<li>æŠ›å‡ºäº†runtimeExceptæˆ–è€…error</li>
</ol>
<h4 id="ç¼–ç¨‹å¼äº‹åŠ¡"><a href="#ç¼–ç¨‹å¼äº‹åŠ¡" class="headerlink" title="ç¼–ç¨‹å¼äº‹åŠ¡"></a>ç¼–ç¨‹å¼äº‹åŠ¡</h4><blockquote>
<ul>
<li><strong>ç¼–ç¨‹å¼äº‹åŠ¡</strong>ä½¿ç”¨TransactionTemplateæˆ–è€…ç›´æ¥ä½¿ç”¨åº•å±‚çš„PlatformTransactionManagerã€‚å¯¹äºç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼Œspringæ¨èä½¿ç”¨TransactionTemplateã€‚</li>
</ul>
</blockquote>
<h4 id="å£°æ˜å¼äº‹åŠ¡"><a href="#å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="å£°æ˜å¼äº‹åŠ¡"></a>å£°æ˜å¼äº‹åŠ¡</h4><blockquote>
<ul>
<li><strong>å£°æ˜å¼äº‹åŠ¡</strong>æ˜¯å»ºç«‹åœ¨AOPä¹‹ä¸Šçš„ã€‚å…¶æœ¬è´¨æ˜¯å¯¹æ–¹æ³•å‰åè¿›è¡Œæ‹¦æˆªï¼Œç„¶ååœ¨ç›®æ ‡æ–¹æ³•å¼€å§‹ä¹‹å‰åˆ›å»ºæˆ–è€…åŠ å…¥ä¸€ä¸ªäº‹åŠ¡ï¼Œåœ¨æ‰§è¡Œå®Œç›®æ ‡æ–¹æ³•ä¹‹åæ ¹æ®æ‰§è¡Œæƒ…å†µæäº¤æˆ–è€…å›æ»šäº‹åŠ¡ã€‚å£°æ˜å¼äº‹åŠ¡æœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯ä¸éœ€è¦é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼ç®¡ç†äº‹åŠ¡ï¼Œè¿™æ ·å°±ä¸éœ€è¦åœ¨ä¸šåŠ¡é€»è¾‘ä»£ç ä¸­æºæ‚äº‹åŠ¡ç®¡ç†çš„ä»£ç ï¼Œåªéœ€åœ¨é…ç½®æ–‡ä»¶ä¸­åšç›¸å…³çš„äº‹åŠ¡è§„åˆ™å£°æ˜(æˆ–é€šè¿‡åŸºäº@Transactionalæ³¨è§£çš„æ–¹å¼)ï¼Œä¾¿å¯ä»¥å°†äº‹åŠ¡è§„åˆ™åº”ç”¨åˆ°ä¸šåŠ¡é€»è¾‘ä¸­ã€‚</li>
</ul>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wang-yonggan.github.io/2022/03/18/spring/%E6%BA%90%E7%A0%81-%E5%8E%9F%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/t2.png">
      <meta itemprop="name" content="å‹‡æ•¢">
      <meta itemprop="description" content="å­¦æ— æ­¢å¢ƒ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MySoul">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/18/spring/%E6%BA%90%E7%A0%81-%E5%8E%9F%E7%90%86/" class="post-title-link" itemprop="url">springæºç -åŸç†</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-03-18 13:39:39" itemprop="dateCreated datePublished" datetime="2022-03-18T13:39:39+08:00">2022-03-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-03-31 17:17:04" itemprop="dateModified" datetime="2022-03-31T17:17:04+08:00">2022-03-31</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyanï¼š</span>
    
    
      <a title="changyan" href="/2022/03/18/spring/%E6%BA%90%E7%A0%81-%E5%8E%9F%E7%90%86/#SOHUCS" itemprop="discussionUrl">
        <span id="url::https://wang-yonggan.github.io/2022/03/18/spring/%E6%BA%90%E7%A0%81-%E5%8E%9F%E7%90%86/" class="cy_cmt_count" data-xid="2022/03/18/spring/æºç -åŸç†/" itemprop="commentCount"></span>
      </a>
    
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>5k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>5 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="å¯åŠ¨åŸç†"><a href="#å¯åŠ¨åŸç†" class="headerlink" title="å¯åŠ¨åŸç†"></a>å¯åŠ¨åŸç†</h2><h3 id="main"><a href="#main" class="headerlink" title="main"></a>main</h3><p>@SpringBootApplication = (é»˜è®¤å±æ€§)@Configuration + @EnableAutoConfiguration + @ComponentScan</p>
<h2 id="ä¸€ã€beanæ³¨å…¥"><a href="#ä¸€ã€beanæ³¨å…¥" class="headerlink" title="ä¸€ã€beanæ³¨å…¥"></a>ä¸€ã€beanæ³¨å…¥</h2><h3 id="Componentçš„åŠ è½½"><a href="#Componentçš„åŠ è½½" class="headerlink" title="@Componentçš„åŠ è½½"></a>@Componentçš„åŠ è½½</h3><blockquote>
<p>@ComponentScanæ²¡æŒ‡å®šä¼šè‡ªåŠ¨æ‰«ææœ¬åŒ…ä¸‹çš„Componentï¼Œ</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loadClass</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//è·å¾—scanè·¯å¾„</span></span><br><span class="line">        <span class="keyword">final</span> ComponentScan annotation = LoginApplication.class.getAnnotation(ComponentScan.class);</span><br><span class="line">        String scanPath=annotation.value()[<span class="number">0</span>];</span><br><span class="line">        <span class="comment">//è¿‡çš„æœ¬jarçš„classLoder</span></span><br><span class="line">        ClassLoader classLoader=<span class="keyword">this</span>.getClass().getClassLoader();</span><br><span class="line">        <span class="comment">//è·å¾—èµ„æº</span></span><br><span class="line">        <span class="keyword">final</span> URL resource = classLoader.getResource(scanPath);</span><br><span class="line">        File file=<span class="keyword">new</span> File(resource.getFile());</span><br><span class="line">        <span class="keyword">final</span> File[] files = file.listFiles(f-&gt;f.getPath().endsWith(<span class="string">&quot;.class&quot;</span>));<span class="comment">//è·å¾—è·¯å¾„ä¸‹çš„æ‰€æœ‰classæ–‡ä»¶</span></span><br><span class="line">        <span class="comment">//åŠ è½½component;</span></span><br><span class="line">        <span class="keyword">for</span> (File f : files) &#123;</span><br><span class="line">            <span class="keyword">final</span> String path = f.getAbsoluteFile().getPath();</span><br><span class="line">            String className=path.substring(path.indexOf(<span class="string">&quot;com.wyg&quot;</span>),path.indexOf(<span class="string">&quot;.class&quot;</span>));</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//åŠ è½½ç±»</span></span><br><span class="line">                Class clazz =classLoader.loadClass(className);</span><br><span class="line">                <span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºbean</span></span><br><span class="line">                <span class="keyword">if</span>(clazz.isAnnotationPresent(Component.class))&#123;</span><br><span class="line">                    putTypeToMap(clazz);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="åˆ›å»ºç±»å‹æ± â€”-beanDefinetionMap"><a href="#åˆ›å»ºç±»å‹æ± â€”-beanDefinetionMap" class="headerlink" title="åˆ›å»ºç±»å‹æ± â€”-beanDefinetionMap"></a>åˆ›å»ºç±»å‹æ± â€”-beanDefinetionMap</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> ConcurrentHashMap&lt;String, BeanDefinition&gt; beanDefinitionMap = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;();</span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">putTypeToMap</span><span class="params">(Class type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Component annotation = (Component) type.getAnnotation(Component.class);</span><br><span class="line">        String name = annotation.value();</span><br><span class="line">        BeanDefinition beanDefinition = <span class="keyword">new</span> BeanDefinition();</span><br><span class="line">        beanDefinition.setType(type);</span><br><span class="line">        beanDefinitionMap.put(name, beanDefinition);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="åˆ›å»ºå•ä¾‹æ± "><a href="#åˆ›å»ºå•ä¾‹æ± " class="headerlink" title="åˆ›å»ºå•ä¾‹æ± "></a>åˆ›å»ºå•ä¾‹æ± </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å¾—å•ä¾‹æ± </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">putObjectToMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (String name : beanDefinitionMap.keySet()) &#123;</span><br><span class="line">        <span class="keyword">final</span> BeanDefinition beanDefinition = beanDefinitionMap.get(name);</span><br><span class="line">        <span class="keyword">if</span> (beanDefinition.getScope().equals(<span class="string">&quot;single&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">final</span> Object bean = createBean(name,beanDefinition);</span><br><span class="line">            singleMap.put(name, bean);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è·å¾—bean"><a href="#è·å¾—bean" class="headerlink" title="è·å¾—bean"></a>è·å¾—bean</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Object <span class="title">getBean</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">final</span> BeanDefinition beanDefinition = beanDefinitionMap.get(name);</span><br><span class="line">       <span class="keyword">if</span> (beanDefinition.getScope().equals(<span class="string">&quot;signle&quot;</span>)) &#123;</span><br><span class="line">           <span class="comment">//å•ä¾‹æ¨¡å¼--&gt;</span></span><br><span class="line">           Object bean = singleMap.get(name);</span><br><span class="line">           <span class="keyword">if</span> (bean == <span class="keyword">null</span>) &#123;</span><br><span class="line">               bean = createBean(name,beanDefinition);</span><br><span class="line">               singleMap.put(name, bean);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">return</span> bean;</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="keyword">return</span> createBean(name,beanDefinition);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<h3 id="åˆ›å»ºbeanâ€”å•ä¾‹æ¨¡å¼"><a href="#åˆ›å»ºbeanâ€”å•ä¾‹æ¨¡å¼" class="headerlink" title="åˆ›å»ºbeanâ€”å•ä¾‹æ¨¡å¼"></a>åˆ›å»ºbeanâ€”å•ä¾‹æ¨¡å¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºå•ä¾‹bean</span></span><br><span class="line">    <span class="function">Object <span class="title">createBean</span><span class="params">(String beanName,BeanDefinition beanDefinition)</span> </span>&#123;</span><br><span class="line">        Class type = beanDefinition.getType();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//ä¾èµ–æ³¨å…¥</span></span><br><span class="line">            <span class="keyword">final</span> Object bean = type.newInstance();</span><br><span class="line">            <span class="keyword">for</span> (Field field : type.getDeclaredFields()) &#123;</span><br><span class="line">                <span class="keyword">if</span>(field.isAnnotationPresent(Autowired.class))&#123;</span><br><span class="line">                    field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">                    field.set(bean,getBean(field.getName()));<span class="comment">//æ³¨å…¥bean</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(bean <span class="keyword">instanceof</span> BeanNameAware)</span><br><span class="line">                ((BeanNameAware)bean).setBeanName(beanName);</span><br><span class="line">            <span class="keyword">if</span>(bean <span class="keyword">instanceof</span> InitializingBean)&#123;</span><br><span class="line">                ((InitializingBean)bean).afterPropertiesSet();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> bean;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¾èµ–æ³¨å…¥é—®é¢˜"><a href="#ä¾èµ–æ³¨å…¥é—®é¢˜" class="headerlink" title="ä¾èµ–æ³¨å…¥é—®é¢˜"></a>ä¾èµ–æ³¨å…¥é—®é¢˜</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºå•ä¾‹bean</span></span><br><span class="line"> <span class="function">Object <span class="title">createBean</span><span class="params">(BeanDefinition beanDefinition)</span> </span>&#123;</span><br><span class="line">     Class type = beanDefinition.getType();</span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">         <span class="comment">//ä¾èµ–æ³¨å…¥</span></span><br><span class="line">         <span class="keyword">final</span> Object bean = type.newInstance();</span><br><span class="line">         <span class="keyword">for</span> (Field field : type.getDeclaredFields()) &#123;</span><br><span class="line">             <span class="keyword">if</span>(field.isAnnotationPresent(Autowired.class))&#123;</span><br><span class="line">                 field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">                 field.set(bean,getBean(field.getName()));<span class="comment">//æ³¨å…¥bean</span></span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> bean;</span><br><span class="line">     &#125; <span class="keyword">catch</span> (InstantiationException | IllegalAccessException e) &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<h3 id="åˆå§‹åŒ–æ¥å£"><a href="#åˆå§‹åŒ–æ¥å£" class="headerlink" title="åˆå§‹åŒ–æ¥å£"></a>åˆå§‹åŒ–æ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">b</span> <span class="keyword">implements</span> <span class="title">InitializingBean</span></span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img src="https://job-wyg.oss-cn-beijing.aliyuncs.com/image-20220318173240631.png" alt="image-20220318173240339"></p>
<h2 id="å‡ ç§å·¥å‚"><a href="#å‡ ç§å·¥å‚" class="headerlink" title="å‡ ç§å·¥å‚"></a>å‡ ç§å·¥å‚</h2><p><img src="https://job-wyg.oss-cn-beijing.aliyuncs.com/AnnotationConfigApplicationContext.png" alt="AnnotationConfigApplicationContext"></p>
<h3 id="BeanFactory"><a href="#BeanFactory" class="headerlink" title="BeanFactory"></a>BeanFactory</h3><blockquote>
<p>IOCçš„æ ¹æ¥å£,ç»™é™¤äº†çš„IOCå®¹å™¨çš„å®ç°æä¾›äº†è§„èŒƒ</p>
<p><strong>XMLBeanFactory</strong></p>
<p><strong>ApplicationContext</strong> </p>
<p><strong>ClassPathXmlApplicationContext</strong> </p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">getBean</span><span class="params">(String name)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">containsBean</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSingleton</span><span class="params">(String name)</span> <span class="keyword">throws</span> NoSuchBeanDefinitionException </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String[] getAliases(String name) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> String[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="FactoryBean"><a href="#FactoryBean" class="headerlink" title="FactoryBean"></a>FactoryBean</h3><blockquote>
<p>FactoryBeanæ˜¯ä¸€ä¸ªå¯ä»¥ç”Ÿäº§beançš„å·¥å‚(è‡ªèº«ä¹Ÿæ˜¯ä¸€ä¸ªBean)ï¼Œæœ‰ç‚¹ç±»ä¼¼å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚</p>
<p>å®ƒç”¨æ¥åˆ›å»ºbeanxå·¥å‚ï¼Œå·¥å‚ç”Ÿäº§beanxï¼Œå¯ä»¥è‡ªå®šä¹‰Beanxæ˜¯å¦ä¸ºå•ä¾‹ï¼Œåªéœ€è¦é‡å†™æ–¹æ³•å°±ok</p>
<p>è¿™ä¸ªæ¥å£çš„æ–¹æ³•å¯ä»¥å¯¹æ¯”å·¥å‚æ–¹æ³•æ¨¡å¼(å‚è€ƒoneNode.è®¾è®¡æ¨¡å¼.å·¥å‚æ–¹æ³•æ¨¡å¼)</p>
</blockquote>
<blockquote>
<p>äº§ç”Ÿçš„beanä¹Ÿå½’springç®¡ç†ï¼Œå¯ä»¥autowire</p>
<p>å’Œæ™®é€šçš„@ComponentåŒºåˆ«</p>
<ol>
<li>åˆå§‹æ—¶æœºæ—©äºSpringçš„æ™®é€šbeanï¼Œæ‰€æœ‰ä¸èƒ½ä¾èµ–æ³¨å…¥</li>
<li>è¯¥çš„classæ–¹å¼å¯å˜ï¼Œ@Componentæ˜¯å†™æ­»çš„</li>
<li>æä¾›äº†å¾ˆå¤šå®ç°ï¼Œæ¯”å¦‚ListFactoryBean,MapFactoryBean</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListFactoryBean</span> <span class="keyword">extends</span> <span class="title">AbstractFactoryBean</span>&lt;<span class="title">List</span>&lt;<span class="title">Object</span>&gt;&gt; </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> List&lt;?&gt; sourceList;<span class="comment">//æºlist</span></span><br><span class="line">	<span class="keyword">private</span> Class&lt;? extends List&gt; targetListClass;<span class="comment">//class</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSourceList</span><span class="params">(List&lt;?&gt; sourceList)</span> </span>&#123;<span class="keyword">this</span>.sourceList = sourceList;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTargetListClass</span><span class="params">(<span class="meta">@Nullable</span> Class&lt;? extends List&gt; targetListClass)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.targetListClass = targetListClass;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Class&lt;List&gt; <span class="title">getObjectType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> List.class;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> List&lt;Object&gt; <span class="title">createInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		....</span><br><span class="line">		List&lt;Object&gt; result = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.targetListClass != <span class="keyword">null</span>) &#123;</span><br><span class="line">			result = BeanUtils.instantiateClass(<span class="keyword">this</span>.targetListClass);<span class="comment">//class.newInstance();</span></span><br><span class="line">		&#125;</span><br><span class="line">  		....</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="ApplicationContext"><a href="#ApplicationContext" class="headerlink" title="ApplicationContext"></a>ApplicationContext</h3><blockquote>
<p>å®Œå–„çš„BeanFactoryï¼Œè¯¥IOCé™¤äº†æä¾›beançš„åŸºæœ¬ç®¡ç†è¿˜æä¾›ä»¥ä¸‹åŠŸèƒ½</p>
<p>â€¢ MessageSource, æä¾›å›½é™…åŒ–çš„æ¶ˆæ¯è®¿é—®<br>â€¢ èµ„æºè®¿é—®ï¼Œå¦‚URLå’Œæ–‡ä»¶<br>â€¢ äº‹ä»¶ä¼ æ’­<br>â€¢ è½½å…¥å¤šä¸ªï¼ˆæœ‰ç»§æ‰¿å…³ç³»ï¼‰ä¸Šä¸‹æ–‡ ï¼Œä½¿å¾—æ¯ä¸€ä¸ªä¸Šä¸‹æ–‡éƒ½ä¸“æ³¨äºä¸€ä¸ªç‰¹å®šçš„å±‚æ¬¡ï¼Œæ¯”å¦‚åº”ç”¨çš„webå±‚; </p>
</blockquote>
<h3 id="AnnotationConfigApplicationContext"><a href="#AnnotationConfigApplicationContext" class="headerlink" title="AnnotationConfigApplicationContext"></a>AnnotationConfigApplicationContext</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wang-yonggan.github.io/2022/03/17/408/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcpip/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/t2.png">
      <meta itemprop="name" content="å‹‡æ•¢">
      <meta itemprop="description" content="å­¦æ— æ­¢å¢ƒ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MySoul">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/17/408/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcpip/" class="post-title-link" itemprop="url">TCP/IP</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-03-17 02:05:23" itemprop="dateCreated datePublished" datetime="2022-03-17T02:05:23+08:00">2022-03-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-04-03 12:27:47" itemprop="dateModified" datetime="2022-04-03T12:27:47+08:00">2022-04-03</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyanï¼š</span>
    
    
      <a title="changyan" href="/2022/03/17/408/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcpip/#SOHUCS" itemprop="discussionUrl">
        <span id="url::https://wang-yonggan.github.io/2022/03/17/408/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/tcpip/" class="cy_cmt_count" data-xid="2022/03/17/408/è®¡ç®—æœºç½‘ç»œ/tcpip/" itemprop="commentCount"></span>
      </a>
    
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>910</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹</h2><h4 id="ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹"><a href="#ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹"></a>ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹</h4><p>â€œä¸‰æ¬¡æ¡æ‰‹â€çš„ç›®çš„æ˜¯</p>
<ul>
<li>ä¸ºäº†é˜²æ­¢å·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µçªç„¶åˆä¼ é€åˆ°äº†æœåŠ¡ç«¯ï¼Œå› è€Œäº§ç”Ÿé”™è¯¯</li>
<li>ç½‘ç»œä¸­å­˜åœ¨å»¶è¿Ÿçš„é‡å¤åˆ†ç»„</li>
</ul>
<p>â€‹    å·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µâ€çš„äº§ç”Ÿåœ¨è¿™æ ·ä¸€ç§æƒ…å†µä¸‹ï¼šclientå‘å‡ºçš„ç¬¬ä¸€ä¸ªè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µå¹¶æ²¡æœ‰ä¸¢å¤±ï¼Œè€Œæ˜¯åœ¨æŸä¸ªç½‘ç»œç»“ç‚¹é•¿æ—¶é—´çš„<strong>æ»ç•™</strong>äº†ï¼Œä»¥è‡´å»¶è¯¯åˆ°è¿æ¥é‡Šæ”¾ä»¥åçš„æŸä¸ªæ—¶é—´æ‰åˆ°è¾¾serverã€‚æœ¬æ¥è¿™æ˜¯ä¸€ä¸ªæ—©å·²å¤±æ•ˆçš„æŠ¥æ–‡æ®µã€‚ä½†serveræ”¶åˆ°æ­¤å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µåï¼Œå°±<strong>è¯¯è®¤ä¸ºæ˜¯clientå†æ¬¡å‘å‡ºçš„ä¸€ä¸ªæ–°çš„è¿æ¥è¯·æ±‚</strong>ã€‚äºæ˜¯å°±å‘clientå‘å‡ºç¡®è®¤æŠ¥æ–‡æ®µï¼ŒåŒæ„å»ºç«‹è¿æ¥ã€‚å‡è®¾ä¸é‡‡ç”¨â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼Œé‚£ä¹ˆåªè¦serverå‘å‡ºç¡®è®¤ï¼Œæ–°çš„è¿æ¥å°±å»ºç«‹äº†ã€‚ç”±äºç°åœ¨clientå¹¶æ²¡æœ‰å‘å‡ºå»ºç«‹è¿æ¥çš„è¯·æ±‚ï¼Œå› æ­¤ä¸ä¼šç†ç¬serverçš„ç¡®è®¤ï¼Œä¹Ÿä¸ä¼šå‘serverå‘é€æ•°æ®ã€‚<strong>ä½†serverå´ä»¥ä¸ºæ–°çš„è¿è¾“è¿æ¥å·²ç»å»ºç«‹</strong>ï¼Œå¹¶ä¸€ç›´ç­‰å¾…clientå‘æ¥æ•°æ®ã€‚è¿™æ ·ï¼Œserverçš„å¾ˆå¤šèµ„æºå°±ç™½ç™½æµªè´¹æ‰äº†</p>
<h4 id="ä¸ºä»€ä¹ˆæ˜¯å››æ¬¡æŒ¥æ‰‹"><a href="#ä¸ºä»€ä¹ˆæ˜¯å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="ä¸ºä»€ä¹ˆæ˜¯å››æ¬¡æŒ¥æ‰‹"></a>ä¸ºä»€ä¹ˆæ˜¯å››æ¬¡æŒ¥æ‰‹</h4><p>Aï¼šæˆ‘è¯´å®Œäº†<br>Bï¼šæˆ‘çŸ¥é“äº†ï¼Œç­‰ä¸€ä¸‹ï¼Œæˆ‘å¯èƒ½è¿˜æ²¡è¯´å®Œ</p>
<blockquote>
<p>è¢«åŠ¨æ–¹æ­¤æ—¶æœ‰å¯èƒ½è¿˜æœ‰ç›¸åº”çš„æ•°æ®æŠ¥æ–‡éœ€è¦å‘é€ï¼Œå› æ­¤éœ€è¦å…ˆå‘é€ACKæŠ¥æ–‡ï¼Œå‘ŠçŸ¥ä¸»åŠ¨æ–¹â€œæˆ‘çŸ¥é“ä½ æƒ³æ–­å¼€è¿æ¥çš„è¯·æ±‚äº†â€ã€‚è¿™æ ·ä¸»åŠ¨æ–¹ä¾¿ä¸ä¼šå› ä¸ºæ²¡æœ‰æ”¶åˆ°åº”ç­”è€Œç»§ç»­å‘é€æ–­å¼€è¿æ¥çš„è¯·æ±‚ï¼ˆå³FINæŠ¥æ–‡ï¼‰ã€‚</p>
</blockquote>
<p>Bï¼šæˆ‘ä¹Ÿè¯´å®Œäº†<br>Aï¼šæˆ‘çŸ¥é“äº†ï¼Œç»“æŸå§</p>
<h4 id="SYNå’ŒACK"><a href="#SYNå’ŒACK" class="headerlink" title="SYNå’ŒACK"></a>SYNå’ŒACK</h4><p>ACK è‹±æ–‡ç¼©å†™: ACK (ACKnowledge Characterï¼‰ ä¸­æ–‡è¯‘å: ç¡®è®¤å­—ç¬¦  </p>
<p>SYN åŒ…(synchronize ä½¿åŒæ­¥)  SYN=1 è¡¨ç¤º SYN æŠ¥æ–‡</p>
<p>åºåˆ—å·ï¼š    </p>
<p>ç¡®è®¤åº”ç­”å·ï¼š</p>
<p><img src="https://job-wyg.oss-cn-beijing.aliyuncs.com/image-20220403122738600.png" alt="image-20220403122738600"></p>
<p>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šä¸»æœºAå‘é€ä½ç ä¸ºSYN=1ï¼Œéšæœºäº§ç”Ÿseq number=1234567çš„æ•°æ®åŒ…åˆ°æœåŠ¡å™¨ï¼Œä¸»æœºBç”±SYN=1çŸ¥é“ï¼ŒAè¦æ±‚å»ºç«‹è”æœºï¼›</p>
<p>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼Œä¸»æœºBæ”¶åˆ°è¯·æ±‚åè¦ç¡®è®¤è”æœºä¿¡æ¯ï¼Œå‘Aå‘é€ack number=(ä¸»æœºAçš„seq+1)ï¼ŒSYN=1,ACK=1ï¼Œéšæœºäº§ç”Ÿseq number=7654321çš„åŒ…ï¼›</p>
<p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šä¸»æœºAæ”¶åˆ°åæ£€æŸ¥ack numberæ˜¯å¦æ­£ç¡®ï¼Œå³ç¬¬ä¸€æ¬¡å‘é€çš„seq number+1ï¼Œä»¥åŠä½ç ACKæ˜¯å¦ä¸º1ï¼Œè‹¥æ­£ç¡®ï¼Œä¸»æœºAä¼šå†å‘é€ack number=ï¼ˆä¸»æœºBçš„seq+1ï¼‰,ACK=1ï¼Œä¸»æœºBæ”¶åˆ°åç¡®è®¤seqå€¼ä¸ACK=1åˆ™è¿æ¥å»ºç«‹æˆåŠŸã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="å‹‡æ•¢"
      src="/images/t2.png">
  <p class="site-author-name" itemprop="name">å‹‡æ•¢</p>
  <div class="site-description" itemprop="description">å­¦æ— æ­¢å¢ƒ</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">108</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://gitee.com/wang_yonggan" title="Gitee â†’ https:&#x2F;&#x2F;gitee.com&#x2F;wang_yonggan" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>Gitee</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:2245316014@qq.com" title="E-Mail â†’ mailto:2245316014@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">å‹‡æ•¢</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">292k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">4:25</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script size="300" alpha="0.6" zIndex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  <script id="cy_cmt_num" src="https://changyan.sohu.com/upload/plugins/plugins.list.count.js?clientId=cyvGB7eAg"></script>


</body>
</html>
